{% extends "page.html" %}

{% block subtitle %}{{ _('Organizations') }}{% endblock %}

{% block maintag %}
<div class="awsis-org-page" role="main">
{% endblock %}

{% block toolbar %}{% endblock %}

{% block breadcrumb %}{% endblock %}

{% block content %}
  {# Hero Section #}
  <section class="awsis-org-hero">
    <div class="container">
      <div class="awsis-org-hero-content" data-aos="fade-up">
        <h1 class="awsis-org-hero-title">Our Partners</h1>
        <p class="awsis-org-hero-subtitle">
          Organizations working together for water security in the Indian Sundarbans
        </p>
        {% if h.check_access('organization_create') %}
          <div class="awsis-org-hero-action">
            <a href="{{ h.url_for('organization.new') }}" class="button is-primary is-medium">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
              </svg>
              {{ _('Add Organization') }}
            </a>
          </div>
        {% endif %}
      </div>
    </div>
  </section>

  {# Organizations Grid #}
  <section class="awsis-org-section">
    <div class="container">
      {% if page.items %}
        <div class="awsis-org-grid" data-aos="fade-up">
          {% for organization in page.items %}
            <a href="{{ h.url_for('organization.read', id=organization.name) }}" class="awsis-org-card">
              <div class="awsis-org-card-image">
                {% if organization.image_display_url %}
                  <img src="{{ organization.image_display_url }}" alt="{{ organization.display_name }}">
                {% else %}
                  <div class="awsis-org-card-placeholder">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                    </svg>
                  </div>
                {% endif %}
              </div>
              <div class="awsis-org-card-content">
                <h3 class="awsis-org-card-title">{{ organization.display_name }}</h3>
                {% if organization.description %}
                  <p class="awsis-org-card-description">
                    {{ h.truncate(organization.description, 120) }}
                  </p>
                {% endif %}
                <div class="awsis-org-card-meta">
                  <span class="awsis-org-card-count">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4" />
                    </svg>
                    {{ organization.package_count }} {{ _('Datasets') }}
                  </span>
                </div>
              </div>
            </a>
          {% endfor %}
        </div>

        {# Pagination #}
        {% if page.item_count > 20 %}
          <div class="awsis-org-pagination">
            {{ page.pager(q=q or '', sort=sort_by_selected or '') }}
          </div>
        {% endif %}
      {% else %}
        <div class="awsis-org-empty" data-aos="fade-up">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
          </svg>
          <p>{{ _('There are currently no organizations for this site') }}</p>
          {% if h.check_access('organization_create') %}
            <a href="{{ h.url_for('organization.new') }}" class="btn btn-primary">
              {{ _('Create an Organization') }}
            </a>
          {% endif %}
        </div>
      {% endif %}
    </div>
  </section>

  {# CTA Section #}
  <section class="awsis-org-cta">
    <div class="container">
      <div class="awsis-org-cta-content" data-aos="fade-up">
        <h2>Want to contribute data?</h2>
        <p>Join the alliance and share your water security data with the community.</p>
        <a href="{{ h.url_for('home.about') }}" class="button is-outlined is-medium">Learn More</a>
      </div>
    </div>
  </section>
{% endblock %}

{% block primary %}{% endblock %}
{% block secondary %}{% endblock %}
